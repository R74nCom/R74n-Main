<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
<!--
⢠⣤⣤⣤⣤⣤⣤⣤⣤⣤⣤⣄⣀⣀⠄⠄⠄⠄⠄⠄⠄⠄⣀⣀⣀⣀⣀⣀⣀⡀
⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣆⡀⠄⠄⠄⠄⠿⠿⠿⠿⢿⣿⣿⠇
⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠄⠄⠄⠄⠄⠄⠄⣠⣿⡿⠁⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠈⠹⣿⣿⣿⣿⣧⠄⠄⠄⠄⠄⣰⣿⡿⠁⠄⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠄⠄⣿⣿⣿⣿⣿⠄⠄⠄⠄⢀⣿⣿⠇⠄⠄⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠄⢀⣿⣿⣿⣿⡟⠄⠄⠄⠄⠘⠛⠛⢀⣀⣀⠄
⢸⣿⣿⣿⣿⣤⣤⣤⣤⣤⣤⣤⣶⣾⣿⣿⣿⡿⠄⠄⠄⠄⠄⠄⢀⣴⣿⣿⣿⠄
⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠋⠄⠄⠄⠄⠄⠄⣠⣿⠟⢹⣿⣿⠄
⢸⣿⣿⣿⣿⠿⠿⠿⣿⣿⣿⣿⣯⣍⠁⠄⠄⠄⠄⠄⠄⢀⣾⣿⣉⣀⣸⣿⣿⣀
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠙⢿⣿⣿⣿⣷⣄⠄⠄⠄⠄⠄⠸⠿⠿⠿⠿⢿⣿⣿⠿
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠈⣿⣿⣿⣿⣿⣆⠄⠄⠄⠄⠄⠄⠄⠄⠄⠸⠿⠿⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠈⢿⣿⣿⣿⣿⣇⠄⠄⠄⠄⣿⣿⣧⣾⣿⣿⣷⡀
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠈⢻⣿⣿⣿⣿⣦⠄⠄⠄⣿⣿⡏⠄⢸⣿⣿⡇
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠄⠄⢿⣿⣿⣿⣿⣆⠄⠄⣿⣿⡇⠄⢸⣿⣿⡇
⠘⠛⠛⠛⠛⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠛⠛⠛⠛⠛⠃⠄⠛⠛⠃⠄⠘⠛⠛⠃
This HTML and its contents are property of R74n.com.
-->
    <meta name="description" content="Halacae is a concept-based, interpretive, artistic, philosophical language with just 16 letters.">
    <meta name="keywords" content="R74n, R47n">
    <meta name="author" content="R74n">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="twitter:image:alt" content="R74n">
    <meta name="twitter:image" content="/icons/avatar.png">
    <title>Halacae Word Viewer - R74n</title>
    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../stylesheet.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#00ffff">
    <link rel="icon" type="image/x-icon" sizes="40x40" href="/icons/favicon.ico">
    <meta name="theme-color" content="#000000">

    <script src="https://R74n.com/load.js"></script>
    <script src="wordlist.js"></script>

</head>

<body>

<header>
<a href="/" class="home"></a>
<a href="." class="back">⦉</a>
<h1 class="pagetitle">Halacae Word Viewer</h1>
</header>

<main class="content">

<p>Halacae is a very programmatic language by nature. This tool uses that to extract data from words. Always see the full <a href="https://docs.google.com/document/d/1mZ2IGrIbfYlUwfuZ53_S0n5O2ne9JUKV0yinIyNwLFU/edit?usp=sharing" target="_blank">dictionary</a>.</p>
<p>
  <input id="wordSearch" type="text" placeholder="Enter word..." oninput="showWordInfo(this.value,true)"><br>
</p>
<p id="wordInfo">Loading word info...</p>

<script>
function showWordInfo(word,soft){
  word = word.toLowerCase();
  if (!word.match(/^(ae?|e|i|oo?|u)?(([chlmprsy-](ae?|e|i|oo?|u))+)?$/i)) {
    if (soft !== true) {wordInfoE.innerHTML = "That's not a valid Halacae word. Make sure it is only one!";}
    if (word.length === 0) {
      wordInfoE.innerHTML = "Enter a word to see its info.";
    }
    return;
  }
  // make all halacaeWords keys lowercase
  for (var key in halacaeWords) {
    if (halacaeWords.hasOwnProperty(key)) {
      var newKey = key.toLowerCase();
      if (newKey === key) { continue; }
      halacaeWords[newKey] = halacaeWords[key];
      delete halacaeWords[key];
    }
  }
  wordKeys = Object.keys(halacaeWords);
  wordKeys.sort(function(a, b){return b.length - a.length});
  // in every key, replace oo with ø and ae with æ
  for (var i = 0; i < wordKeys.length; i++) {
    var key = wordKeys[i];
    var newKey = key.toLowerCase().replace(/oo/g, "ø").replace(/ae/g, "æ");
    if (newKey === key) { continue; }
    wordKeys[i] = newKey;
  }
  wordInfo = "Word: <strong><em>" + word + "</em></strong><br><br>";

  wordInfo += "Part of speech: ";
  if (word.match(/^(ae?|e|i|oo?|u)$/i)) { wordInfo += "Vowel"; }
  else if (word.match(/^[chlmprsy-]$/i)) { wordInfo += "Consonant"; }
  else if (word.match(/[^a]e((-(i|oo?))+)?$/i)) { wordInfo += "Adjective"; }
  else if (word.match(/u((-(i|oo?))+)?$/i)) { wordInfo += "Verb"; }
  else { wordInfo += "Noun, probably"; }
  
  wordInfo += "<br><br>Component Count: " + word.match(/[chlmprsy-]?(ae?|e|i|oo?|u)/gi).length;
  wordInfo += "<br>Letter Count: " + word.match(/(ae?|e|i|oo?|u|[chlmprsy-])/gi).length;
  wordInfo += "<br>Character Count: " + word.length;

  var tempWord = word.replace(/oo/g, "ø").replace(/ae/g, "æ");
  var guess = "";
  // loop through all words
  for (var i = 0; i < wordKeys.length; i++) {
    var key = wordKeys[i];
    console.log(key)
    // if the word starts with the key, add the key to guess and trim it off the word
    if (tempWord.startsWith(key)) {
      var guessedWord = halacaeWords[key.replace(/ø/g, "oo").replace(/æ/g, "ae")];
      if (key.match(/^[aeiouøæ]$/i)) { // modifier
        if (key === "e") { guess = guess.substring(0,guess.length-1) + "-like " }
        else if (key === "u") { guess = guess.substring(0,guess.length-1) + "-ing " }
        else if (key === "a") { guess = guess.substring(0,guess.length-1) + "-ness " }
        else { guess = guessedWord + " " + guess + " " }
      }
      else {
        guess += guessedWord + " ";
      }
      tempWord = tempWord.substring(key.length);
      // if it starts with -, remove it
      if (tempWord.startsWith("-")) {
        tempWord = tempWord.substring(1);
      }
      // if the word is now empty, we're done
      if (tempWord.length == 0) {
        break;
      }
      // if the word doesn't start with the key, try the next key
      else {
        i = -1;
      }
    }
  }
  wordInfo += "<br><br>Approximate Definition: " + (guess||"Could not determine.");

  var consonantMeanings = {
    c: "consciousness",
    h: "humanity",
    l: "academia",
    m: "nature",
    p: "energy",
    r: "discipline",
    s: "sensation",
    y: "construction"
  }
  // determine percentages of each consonant compared to other consonants
  var consonantCounts = {};
  for (var i = 0; i < word.length; i++) {
    var letter = word[i];
    if (!letter.match(/[chlmprsy]/i)) { continue; }
    if (!consonantCounts[letter]) { consonantCounts[letter] = 0; }
    consonantCounts[letter]++;
  }
  var consonantPercentages = {};
  for (var letter in consonantCounts) {
    consonantPercentages[letter] = consonantCounts[letter] / word.match(/[chlmprsy]/gi).length * 100;
  }
  // sort consonant percentages
  var consonantPercentagesSorted = Object.keys(consonantPercentages).sort(function(a,b){return consonantPercentages[b]-consonantPercentages[a]});
  // add consonant percentages to wordInfo
  wordInfo += "<br><br>Semantic Percentages:<br>";
  for (var i = 0; i < consonantPercentagesSorted.length; i++) {
    var letter = consonantPercentagesSorted[i];
    wordInfo += consonantMeanings[letter] + " ("+letter+"): " + consonantPercentages[letter].toFixed(2) + "%<br>";
  }

  wordInfoE.innerHTML = wordInfo;
}
  // if url param "word", use that, else use whole query string
  var URLParams = new URLSearchParams(window.location.search);
  var word = URLParams.get('word');
  // if url param "word" is not found, use whole query string
  if (!word) {
    word = window.location.search.substring(1);
  }
  console.log(word)
  wordInfoE = document.getElementById("wordInfo");
  if (!word) {
    wordInfoE.innerHTML = "No word specified. Try adding a word to the end of the URL, like this: <a href='?word=hala'><code>https://R74n.com/halacae/view?word=hala</code></a>";
  }
  else {
window.addEventListener("load",function(){
  showWordInfo(word);
  document.getElementById("wordSearch").value = word;
})
  }
</script>



</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93720349-6"></script>
<script>
  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-93720349-6');
</script>

</body>
</html>