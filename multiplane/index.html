<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
<!--
⢠⣤⣤⣤⣤⣤⣤⣤⣤⣤⣤⣄⣀⣀⠄⠄⠄⠄⠄⠄⠄⠄⣀⣀⣀⣀⣀⣀⣀⡀
⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣆⡀⠄⠄⠄⠄⠿⠿⠿⠿⢿⣿⣿⠇
⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠄⠄⠄⠄⠄⠄⠄⣠⣿⡿⠁⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠈⠹⣿⣿⣿⣿⣧⠄⠄⠄⠄⠄⣰⣿⡿⠁⠄⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠄⠄⣿⣿⣿⣿⣿⠄⠄⠄⠄⢀⣿⣿⠇⠄⠄⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠄⢀⣿⣿⣿⣿⡟⠄⠄⠄⠄⠘⠛⠛⢀⣀⣀⠄
⢸⣿⣿⣿⣿⣤⣤⣤⣤⣤⣤⣤⣶⣾⣿⣿⣿⡿⠄⠄⠄⠄⠄⠄⢀⣴⣿⣿⣿⠄
⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠋⠄⠄⠄⠄⠄⠄⣠⣿⠟⢹⣿⣿⠄
⢸⣿⣿⣿⣿⠿⠿⠿⣿⣿⣿⣿⣯⣍⠁⠄⠄⠄⠄⠄⠄⢀⣾⣿⣉⣀⣸⣿⣿⣀
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠙⢿⣿⣿⣿⣷⣄⠄⠄⠄⠄⠄⠸⠿⠿⠿⠿⢿⣿⣿⠿
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠈⣿⣿⣿⣿⣿⣆⠄⠄⠄⠄⠄⠄⠄⠄⠄⠸⠿⠿⠄
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠈⢿⣿⣿⣿⣿⣇⠄⠄⠄⠄⣿⣿⣧⣾⣿⣿⣷⡀
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠈⢻⣿⣿⣿⣿⣦⠄⠄⠄⣿⣿⡏⠄⢸⣿⣿⡇
⢸⣿⣿⣿⣿⠄⠄⠄⠄⠄⠄⠄⠄⠄⢿⣿⣿⣿⣿⣆⠄⠄⣿⣿⡇⠄⢸⣿⣿⡇
⠘⠛⠛⠛⠛⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠛⠛⠛⠛⠛⠃⠄⠛⠛⠃⠄⠘⠛⠛⠃
This HTML and its contents are property of R74n.com.
-->
    <meta name="description" content="Expansive grid of IDs for R74n projects and concepts.">
    <meta name="keywords" content="R74n, R47n">
    <meta name="author" content="R74n">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="twitter:image:alt" content="R74n">
    <meta name="twitter:image" content="/icons/avatar.png">
    <title>Multiplane - R74n</title>
    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../stylesheet.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#00ffff">
    <link rel="icon" type="image/x-icon" sizes="40x40" href="/icons/favicon.ico">
    <meta name="theme-color" content="#000000">

    <script src="https://R74n.com/load.js"></script>
    
    <style>
      .titleRow {
        background-color: #00ffff;
        color: black;
      }
      .spanRow {
        background-color: #00b4b4;
        color: black;
      }
      table {
        vertical-align: top;
        display: inline-block;
        margin-bottom: 1em;
      }
      .nolink {
        color: white;
      }
      #compactTable td {
        text-align: center;
        min-width: 0.8em;
      }
      .tabContent {
        display: none;
      }
      .highlight {
        background-color: rgb(149, 149, 0);
        transition: background-color 0s;
      }
    </style>
    <script>
      planeList = [];
      function highlight(element) {
        if (!element) {return;}
        element.classList.add("highlight");
        setTimeout(function() {
          element.style.transition = "background-color 3s";
          element.classList.remove("highlight");
        },3000);
        // jump to element
        const y = element.getBoundingClientRect().top + window.scrollY;
        window.scroll({top: y-75,behavior: 'smooth'});
      }
      function handleURL() {
        if (window.location.search.length <= 1) {return;}
        var params = new URLSearchParams(window.location.search);
        if (params.has("dimension")) {
          var dimension = params.get("dimension");
          if (multiplaneDimensions[dimension]) {
            currentState.dimension = dimension;
          }
          initTable();
          openTab("table");
        }
        if (params.has("code")) {
          var code = params.get("code").replace("(-)","(NEGATIVE)").split("-")[0].replace("(NEGATIVE)","(-)");
          if (code === "" && location.hash && !isNaN(location.hash.substring(1))) { // Decimal Planecodes
            code = decimalToPlanecode(parseInt(location.hash.substring(1)));
          }
          var codeData = parsePlanecode(code);
          if (codeData.dimension && multiplaneDimensions[codeData.dimension]) {
            currentState.dimension = codeData.dimension;
          }
          else if (currentState.dimension) {
            code = "("+currentState.dimension+")"+code;
          }
          initTable(codeData.decimal);
          openTab("table");
          highlight(document.getElementById(code));
        }
        else if (params.has("plane")) {
          var code = params.get("plane").replace("(-)","(NEGATIVE)").split("-")[0].replace("(NEGATIVE)","(-)");
          var codeData = parsePlanecode(code);
          if (codeData.dimension && multiplaneDimensions[codeData.dimension]) {
            currentState.dimension = codeData.dimension;
          }
          else if (currentState.dimension) {
            code = "("+currentState.dimension+")"+code;
          }
          initTable(codeData.decimal);
          openTab("table");
        }
        else if (params.has("union")) {
          initUnions();
          openTab("unions");
          highlight(document.getElementById(params.get("union").replace(/ +/g,"+")));
        }
        else if (params.get("search")) {
          openTab("search");
          document.getElementById("searchBox").value = params.get("search");
          searchMultiplane(params.get("search"));
          document.getElementById('searchBox').focus();
        }
        if (document.getElementById("tabButton-"+window.location.search.substr(1))) {
          document.getElementById("tabButton-"+window.location.search.substr(1)).click();
        }
      }
      window.addEventListener("load",function() {
        for (var range in multiplanePlanes) {
          var min = parsePlanecode(range.split("-")[0]).decimal;
          var max = parsePlanecode(range.split("-")[1]).decimal;
          planeList.push({
            "min": min,
            "max": max,
            "range": range,
            "name": multiplanePlanes[range],
          });
        }
        planeList.sort(function(a,b) {
          return a.min - b.min;
        });
        planeListHSort = planeList.slice(0); // hierarchical sort
        planeListHSort.sort(function(a,b) {
          return (a.max-a.min) - (b.max-b.min);
        });
        initSelect();
        initTable();
        if (window.location.search) {
          handleURL();
        }
        window.addEventListener("popstate",function() {
          handleURL();
        });
        document.getElementById("loadingText").remove();
      });
    </script>
    <script src="multiplane.js"></script>
</head>

<body>

<header>
<a href="/" class="home"></a>
<h1 class="pagetitle">Multiplane</h1>
</header>

<main class="content">

<p id="loadingText">Plane Explorer Loading...</p>

<input type="button" id="tabButton-table" value="Table" onclick="openTab('table')" selected="true">
<input type="button" id="tabButton-planes" value="Planes" onclick="initPlanes();openTab('planes')">
<input type="button" id="tabButton-unions" value="Unions" onclick="initUnions();openTab('unions')">
<input type="button" id="tabButton-search" value="Search" onclick="document.getElementById('searchBox').focus();openTab('search')">

<input type="button" value="More Info" onclick="window.open('concept.txt')">

<div class="tabContent" id="tab-table" style="display:block">
  <p>Jump To: <select id="planeSelect"><option selected disabled>Loading...</option></select></p>
  <p id="dimensionControls">Dimension: <select id="dimensionSelect"><option selected disabled>Loading...</option></select></p>
  <table id="compactTable"></table>
  <table id="planeTable"></table>
</div>

<div class="tabContent" id="tab-planes" style="display:none">
  <p>Planes and blocks are displayed here, which are ranges allocated to particular purposes.</p>
  <div id="planeList"></div>
</div>

<div class="tabContent" id="tab-unions" style="display:none">
  <p>Any possible union is valid and useable, but they do not have an officially-defined meaning unless declared here.</p>
  <table id="unionTable"></table>
</div>

<div class="tabContent" id="tab-search" style="display:none">
  <p><input type="text" placeholder="Search..." id="searchBox" onchange="searchMultiplane(this.value)" autocomplete="off"></p>
  <ul id="searchResults">
  </ul>
</div>

<script>
  function openTab(id) {
    var tabs = document.getElementsByClassName("tabContent");
    for (var i = 0; i < tabs.length; i++) {
      tabs[i].style.display = "none";
      document.getElementById("tabButton-"+tabs[i].id.split("tab-")[1]).setAttribute("selected","false");
    }
    document.getElementById("tab-"+id).style.display = "block";
    document.getElementById("tabButton-"+id).setAttribute("selected","true");
  }
  function addRow(left,mid,right,span) {
    var table = document.getElementById("planeTable");
    var row = table.insertRow(-1);
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    cell1.id = left;
    cell1.innerHTML = left;
    cell2.innerHTML = mid;
    cell2.id = mid.substring(1);
    cell3.innerHTML = right;
    if (span) {
      cell1.colSpan = 3;
      cell2.remove();
      cell3.remove();
      cell1.className = "spanRow";
    }
  }
  function addCell(text,title,link,isTitle) {
    var table = document.getElementById("compactTable");
    // use last row
    var row = table.rows[table.rows.length-1];
    if (isTitle || !row) {
      row = table.insertRow(-1);
    }
    var cell = row.insertCell(-1);
    if (link) {
      cell.innerHTML = "<a href=\""+link+"\" title=\""+title+"\">"+text+"</a>";
    } else {
      cell.innerHTML = text;
    }
    cell.title = title;
    if (isTitle) {
      cell.className = "titleRow";
    }
  }
  function controlRow(start) {
    return "<a href=\"javascript:initTable("+(start-256)+")\" style='float:left'>◀︎</a>"
      +
    "<a href=\"javascript:initTable("+(start+256)+")\" style='float:right'>▶︎</a> "
  }

  function parsePlanecode(code) {
    var regex = /^(\(.+\))?R[0-9a-f]{5}$/gi;
    // return null if not a valid code
    if (!regex.test(code)) {
      return null;
    }
    // get the (dimension) and remove the ()
    var dimension = code.match(/\(.+\)/gi);
    if (dimension) {
      dimension = dimension[0].substring(1,dimension[0].length-1);
    } else {
      dimension = "";
    }
    // get R[0-9a-f]{5} and remove the R
    code = code.match(/R[0-9a-f]{5}/gi)[0].substring(1);
    // convert to decimal
    var decimal = parseInt(code,16);
    return {
      "decimal": decimal,
      "dimension": dimension,
    };
  }
  function decimalToPlanecode(decimal) {
    return "R"+decimal.toString(16).toUpperCase().padStart(5,"0");
  }
  function getPlaneAt(decimal) {
    for (var i = 0; i < planeListHSort.length; i++) {
      if (decimal >= planeListHSort[i].min && decimal <= planeListHSort[i].max) {
        return planeListHSort[i];
      }
    }
  }

  currentState = {
    "decimal": 0,
    "dimension": "",
  }

  function initSelect() {
    var select = document.getElementById("planeSelect");
    select.innerHTML = "<option value='unknown' id='planeOption-unknown' disabled>Select a plane</option>";
    var keys = Object.keys(multiplanePlanes);
    for (var i = 0; i < keys.length; i++) {
      var option = document.createElement("option");
      option.value = keys[i].split("-")[0];
      option.id = "planeOption-"+keys[i];
      option.innerHTML = keys[i] + " " + multiplanePlanes[keys[i]];
      select.appendChild(option);
    }
    select.addEventListener("change",function() {
      var code = select.value;
      var parsed = parsePlanecode(code);
      if (parsed) {
        initTable(parsed.decimal);
      }
    });
    
    var dselect = document.getElementById("dimensionSelect");
    dselect.innerHTML = "<option value='unknown' id='dimensionOption-unknown' disabled>Select a dimension</option>";
    var dkeys = Object.keys(multiplaneDimensions);
    for (var i = 0; i < dkeys.length; i++) {
      var option = document.createElement("option");
      option.value = dkeys[i];
      option.id = "dimensionOption-"+dkeys[i];
      if (!dkeys[i]) {
        option.innerHTML = multiplaneDimensions[dkeys[i]];
      }
      else {
        option.innerHTML = multiplaneDimensions[dkeys[i]] + " (" + dkeys[i] + ")";
      }
      dselect.appendChild(option);
    }
    dselect.addEventListener("change",function() {
      currentState.dimension = dselect.value;
      initTable(currentState.decimal);
    });
  }

  function initTable(currentNum) {
    currentNum = currentNum||0;
    currentNum = Math.max(currentNum,0);
    currentNum = Math.min(currentNum,1048575-255);
    currentNum = Math.floor(currentNum/256)*256;
    currentState.decimal = currentNum;
    var currentPrefix = currentNum % 16;
    var currentDimension = currentState.dimension||"";
    if (document.getElementById("dimensionSelect").value !== currentDimension) {
      document.getElementById("dimensionSelect").value = currentDimension;
    }
    if (currentDimension) {
      var dimensionPrefix = "("+currentDimension+")";
    }
    else { dimensionPrefix = ""; }
    document.getElementById("planeTable").innerHTML = "";
    document.getElementById("planeTable").innerHTML += "<thead><tr><th colspan='3'>"+controlRow(currentNum)+"</th></tr><tr><th>"+dimensionPrefix+"R<em>nnnnn</em></th><th>"+dimensionPrefix+"#<em>nnnnn</em></th><th>Entity</th></tr></thead>";
    document.getElementById("compactTable").innerHTML = "<thead>   <tr><th><a href=\"javascript:initTable("+(currentNum-256)+")\">◀︎</a></th><th colspan='15'>"+dimensionPrefix+"R"+((currentNum/16).toString(16).toUpperCase().padStart(4,"0").slice(0, -1))+"yx</th><th><a href=\"javascript:initTable("+(currentNum+256)+")\">▶︎</a></th></tr>   <tr><th>•</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr></thead>";
    // set select to current plane
    var currentPlane = getPlaneAt(currentNum);
    if (currentPlane) {
      document.getElementById("planeOption-"+currentPlane.range).selected = true
    }
    else {
      document.getElementById("planeOption-unknown").selected = true
    }
    var start = currentNum;
    var end = currentNum+256;
    // loop through currentNum to currentNum+255
    for (var i = start; i < end; i++) {
      if (i % 16 == 0) {
        // show the prefix
        var prefix = dimensionPrefix + "R" + (i/16).toString(16).toUpperCase().padStart(4,"0");
        addRow(prefix+"<em>n</em>","","",true);
        addCell((i/16).toString(16).toUpperCase().substr(-1),"","",true);
      }
      var left = (currentNum%16).toString(16).toUpperCase();
      // var right = String.fromCharCode(currentNum+32);
      var right = getEntityAt(currentNum,currentDimension,currentPlane,true);
      addRow(prefix+left,dimensionPrefix+"#"+currentNum,right);
      if (right.indexOf("<") !== -1) {
        right = getEntityAt(currentNum,currentDimension,currentPlane,false);
      }
      // last character of left
      if (!right) {
        addCell("#",prefix+left,"",false);
      } else {
        addCell((right.length === 1 ? right : "#"),prefix+left+" "+right,"#"+prefix+left,false);
      }
      currentNum++;
    }
  }

  function initUnions() {
    var table = document.getElementById("unionTable");
    table.innerHTML = "<thead><tr><th>Union</th><th>Union#</th><th>Composite Entity</th><th>Union (Names)</th></tr></thead>";
    for (var union in multiplaneUnions) {
      var row = table.insertRow(-1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      var cell3 = row.insertCell(2);
      var cell4 = row.insertCell(3);
      cell1.innerHTML = union;
      cell1.id = union;
      cell3.innerHTML = multiplaneUnions[union];
      var entities = union.split("+");
      var entityNames = [];
      var entityDecimals = [];
      for (var i = 0; i < entities.length; i++) {
        var parsed = parsePlanecode(entities[i]);
        entityNames.push(getEntityAt(parsed.decimal,parsed.dimension) || "[???]");
        entityDecimals.push("#"+parsed.decimal);
      }
      cell2.innerHTML = entityDecimals.join("+");
      cell4.innerHTML = entityNames.join(" + ");
    }
  }

  function initPlanes() {
    var listDiv = document.getElementById("planeList");
    listDiv.innerHTML = "";
    var lastMin = 0;
    var lastMax = 0;
    var indent = 0;
    for (var i = 0; i < planeList.length; i++) {
      var plane = planeList[i];
      if (lastMax && plane.min >= lastMin && plane.min <= lastMax) {
        indent = 1;
      } else {
        indent = 0;
        lastMin = plane.min;
        lastMax = plane.max;
      }
      listDiv.innerHTML += "&nbsp; &nbsp; ".repeat(indent) + "<a href=\"?plane="+plane.range+"\" onclick=\"goto('plane="+plane.range+"'); return false\">"+plane.range+"</a>&nbsp; "+plane.name+" &nbsp; <small><em>(#"+plane.min+"-#"+plane.max+")</em></small><br>";
    }
  }

  function goto(query) {
    history.pushState(null, null, "?"+query);
    handleURL();
  }
  function searchMultiplane(query) {
    var searchResults = document.getElementById("searchResults");
    searchResults.innerHTML = "";
    query = query.toLowerCase().trim();
    if (!query) { return; }
    var results = [];
    for (var entity in multiplaneEntities) {
      if (multiplaneEntities[entity].toLowerCase().indexOf(query) !== -1) {
        if (entity.indexOf(")") !== -1) {
          var dimensionPrefix = entity.split(")")[0]+")";
          var entityBase = entity.split(")")[1];
        }
        else { var dimensionPrefix = "";var entityBase = entity;}
        results.push("<a href=\"javascript:goto('code="+dimensionPrefix+decimalToPlanecode(parseInt(entityBase,16))+"')\">"+dimensionPrefix+decimalToPlanecode(parseInt(entityBase,16))+"</a> "+multiplaneEntities[entity].split("//")[0]);
      }
    }
    for (var union in multiplaneUnions) {
      if (multiplaneUnions[union].toLowerCase().indexOf(query) !== -1) {
        results.push("<a href=\"javascript:goto('union="+union+"')\">"+union+"</a> "+multiplaneUnions[union]);
      }
    }
    for (var range in multiplanePlanes) {
      if (multiplanePlanes[range].toLowerCase().indexOf(query) !== -1) {
        results.push("<a href=\"javascript:goto('plane="+range+"')\">"+range+"</a> "+multiplanePlanes[range]);
      }
    }
    results = results.slice(0,25);
    // add to search results
    if (results.length) {
      for (var i = 0; i < results.length; i++) {
        var li = document.createElement("li");
        li.innerHTML = results[i];
        searchResults.appendChild(li);
      }
    } else {
      var li = document.createElement("li");
      li.innerHTML = "No results found.";
      searchResults.appendChild(li);
    }
  }
</script>





</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93720349-6"></script>
<script>
  window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-93720349-6');
</script>

</body>
</html>